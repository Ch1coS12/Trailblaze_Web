<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Messages - Execution Sheets</title>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="execution-sheets.css">
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-button {
            padding: 10px 20px;
            margin: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .btn-success { background: #28a745; color: white; }
        .btn-error { background: #dc3545; color: white; }
        .btn-warning { background: #ffc107; color: black; }
        .btn-info { background: #17a2b8; color: white; }
        .btn-confirm { background: #6c757d; color: white; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Test Messages and Modals</h1>
        <p>Use os botões abaixo para testar se as mensagens e modais estão a funcionar corretamente:</p>
        
        <h3>Test Messages:</h3>
        <button class="test-button btn-success" onclick="testSuccessMessage()">Success Message</button>
        <button class="test-button btn-error" onclick="testErrorMessage()">Error Message</button>
        <button class="test-button btn-warning" onclick="testWarningMessage()">Warning Message</button>
        <button class="test-button btn-info" onclick="testInfoMessage()">Info Message</button>
        
        <h3>Test Modals:</h3>
        <button class="test-button btn-info" onclick="testSimpleModal()">Simple Modal</button>
        <button class="test-button btn-confirm" onclick="testConfirmModal()">Confirm Modal</button>
        
        <h3>Test Loading:</h3>
        <button class="test-button btn-info" onclick="testLoading()">Show Loading (3s)</button>
    </div>

    <!-- Same modal structure as execution-sheets.html -->
    <div id="modal-overlay" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-title">Modal Title</h3>
                <button id="modal-close" class="modal-close">×</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Modal content will be inserted here -->
            </div>
        </div>
    </div>

    <div id="loading" class="loading hidden">
        <div class="spinner"></div>
    </div>

    <div id="message" class="message hidden">
        <div class="message-content">
            <span id="message-text"></span>
            <button id="close-message">×</button>
        </div>
    </div>

    <script>
        // Copy the relevant functions from execution-sheets.js
        const modalOverlay = document.getElementById('modal-overlay');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const modalClose = document.getElementById('modal-close');
        const loading = document.getElementById('loading');
        const message = document.getElementById('message');
        const messageText = document.getElementById('message-text');
        const closeMessage = document.getElementById('close-message');

        // Add event listeners
        modalClose.addEventListener('click', closeModal);
        closeMessage.addEventListener('click', () => message.classList.add('hidden'));
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) closeModal();
        });

        function showMessage(text, type = 'error') {
            console.log(`Showing message: ${text} (type: ${type})`);
            
            if (!message || !messageText) {
                console.error('Message elements not found!');
                alert(`${type.toUpperCase()}: ${text}`);
                return;
            }
            
            messageText.textContent = text;
            message.className = `message ${type}`;
            message.classList.remove('hidden');
            
            const timeout = type === 'success' ? 5000 : 8000;
            setTimeout(() => {
                if (message && !message.classList.contains('hidden')) {
                    message.classList.add('hidden');
                }
            }, timeout);
        }

        function openModal(title, content) {
            modalTitle.textContent = title;
            modalBody.innerHTML = content;
            
            document.body.classList.add('modal-open');
            modalOverlay.style.display = 'flex';
            modalOverlay.classList.remove('hidden');
        }

        function closeModal() {
            modalOverlay.classList.add('hidden');
            modalOverlay.style.display = 'none';
            document.body.classList.remove('modal-open');
            modalBody.innerHTML = '';
        }

        function showLoading() {
            loading.classList.remove('hidden');
        }

        function hideLoading() {
            loading.classList.add('hidden');
        }

        function showConfirmModal(title, message, onConfirm, onCancel = null) {
            openModal(title, `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 16px; margin-bottom: 25px; line-height: 1.5; color: #333;">
                        ${message}
                    </div>
                    <div class="form-actions" style="gap: 15px; justify-content: center;">
                        <button class="btn-danger" onclick="confirmAction()">Yes, Confirm</button>
                        <button class="btn-secondary" onclick="cancelAction()">Cancel</button>
                    </div>
                </div>
            `);
            
            modalOverlay.classList.add('confirm-modal');
            
            window.confirmAction = () => {
                closeModal();
                if (onConfirm) onConfirm();
            };
            
            window.cancelAction = () => {
                closeModal();
                if (onCancel) onCancel();
            };
        }

        // Test functions
        function testSuccessMessage() {
            showMessage('This is a success message! Everything worked perfectly.', 'success');
        }

        function testErrorMessage() {
            showMessage('This is an error message! Something went wrong.', 'error');
        }

        function testWarningMessage() {
            showMessage('This is a warning message! Please be careful.', 'warning');
        }

        function testInfoMessage() {
            showMessage('This is an info message! Here is some information.', 'info');
        }

        function testSimpleModal() {
            openModal('Test Modal', `
                <p>This is a test modal to verify that modals are working correctly.</p>
                <p>You can close this modal by clicking the X button, clicking outside, or pressing ESC.</p>
                <div class="form-actions" style="margin-top: 20px;">
                    <button class="btn-secondary" onclick="closeModal()">Close</button>
                </div>
            `);
        }

        function testConfirmModal() {
            showConfirmModal(
                'Test Confirmation',
                'Are you sure you want to perform this test action?<br><br><strong>This is just a test.</strong>',
                () => {
                    showMessage('You confirmed the action!', 'success');
                },
                () => {
                    showMessage('You cancelled the action.', 'info');
                }
            );
        }

        function testLoading() {
            showLoading();
            setTimeout(() => {
                hideLoading();
                showMessage('Loading test completed!', 'success');
            }, 3000);
        }

        console.log('Test page loaded successfully');
    </script>
</body>
</html>
